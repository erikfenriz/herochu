{"ast":null,"code":"import _classCallCheck from \"/home/erik/projects/dedoface/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/erik/projects/dedoface/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/erik/projects/dedoface/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/erik/projects/dedoface/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/erik/projects/dedoface/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/erik/projects/dedoface/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/erik/projects/dedoface/src/components/VideoComponents/Happy.jsx\";\nimport React, { Component } from 'react';\nimport happyMP4 from '../../assets/videos/experience2/mp4/happy.mp4';\nimport happyWebM from \"../../assets/videos/experience2/webm/happy.webm\"; // import happyMP3 from \"../../assets/audio/happy.mp3\";\n\nimport featherClick from \"../../assets/images/experience2/cursor/feather-click.png\";\nimport featherClicked from \"../../assets/images/experience2/cursor/feather-clicked.png\";\n\nvar Happy =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Happy, _Component);\n\n  function Happy(props) {\n    var _this;\n\n    _classCallCheck(this, Happy);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Happy).call(this, props));\n\n    _this.setTitle = function () {\n      document.title = \"Feeling happy today? Let Perfume Talk by MANE\";\n    };\n\n    _this.setCoordinates = function (e) {\n      _this.setState({\n        x: e.pageX,\n        y: e.pageY\n      });\n    };\n\n    _this.playVideo = function () {\n      _this.video.current.play();\n    };\n\n    _this.clicked = function () {\n      _this.video.current.play();\n\n      _this.video.current.muted = false;\n\n      _this.setState({\n        cursor: \"letPerfumeTalk__video clicked\"\n      });\n\n      console.log(_this.refs.feather.style.opacity); // this.refs.MyGame.style.opacity = 0;\n      // do {\n      //     this.refs.MyGame.style.opacity--\n      // } while (this.refs.MyGame.style.opacity > 0);\n      //\n      // if (this.refs.MyGame.style.opacity === 0) {\n      //     this.refs.MyGame.remove();\n      // }\n    };\n\n    _this.state = {\n      cursor: 'letPerfumeTalk__video click',\n      x: Number,\n      y: Number\n    };\n    _this.video = React.createRef();\n    _this.feather = React.createRef(); // this.audio = React.createRef();\n\n    _this.test = React.createRef();\n    _this.setCoordinates = _this.setCoordinates.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Happy, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setTitle();\n      this.playVideo();\n      setTimeout(this.videoStarts, 300);\n      document.addEventListener('contextmenu', function (event) {\n        return event.preventDefault();\n      });\n\n      var rotatingCursor = function () {\n        /* Local Variables */\n        var INTERVAL_POSITION = 5;\n        var INTERVAL_ROTATION = 100;\n        var lastCursorPos = {\n          x: -999,\n          y: -999\n        };\n        var currentCursorPos = {\n          x: -999,\n          y: -999\n        };\n        var lastCursorAngle = 0,\n            cursorAngle = 0;\n        var cursorEl, cursorImageEl;\n        /* Local Functions */\n        // NOTE: I am transform two different elements here because so I can only animate the rotation with 'transition-property: transform'.\n\n        function setCurrentCursorProps() {\n          // Apply translation (set to actual cursor position)\n          cursorEl.style.transform = \"translate(\".concat(currentCursorPos.x, \"px, \").concat(currentCursorPos.y, \"px)\"); // Ensure correct rotation transition direction\n\n          while (Math.abs(lastCursorAngle - cursorAngle) > 180) {\n            if (cursorAngle > lastCursorAngle) {\n              cursorAngle -= 360;\n            } else if (cursorAngle < lastCursorAngle) {\n              cursorAngle += 360;\n            }\n          } // Apply rotation\n          // cursorImageEl.style.transform = `rotate(${cursorAngle - 90}deg)`;\n\n        }\n\n        function updateCursor() {\n          window.addEventListener('mousemove', function (event) {\n            currentCursorPos = {\n              x: event.clientX,\n              y: event.clientY\n            };\n          }); // Interval for updating cursor-position\n\n          setInterval(setCurrentCursorProps, INTERVAL_POSITION); // Interval for updating cursor-rotation\n\n          setInterval(function () {\n            var delt = {\n              x: lastCursorPos.x - currentCursorPos.x,\n              y: lastCursorPos.y - currentCursorPos.y\n            };\n            if (Math.abs(delt.x) < 3 && Math.abs(delt.y) < 3) return;\n            cursorAngle = Math.atan2(delt.y, delt.x) * 180 / Math.PI;\n            setCurrentCursorProps();\n            lastCursorPos = currentCursorPos;\n            lastCursorAngle = cursorAngle;\n          }, INTERVAL_ROTATION);\n        }\n        /* Public Functions */\n\n\n        return {\n          'initialize': function initialize() {\n            cursorEl = document.querySelector('#cursor');\n            cursorImageEl = document.querySelector('#cursor > img');\n            updateCursor();\n          }\n        };\n      }();\n\n      document.addEventListener('mousemove', rotatingCursor.initialize);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"main\", {\n        onClick: this.clicked,\n        className: \"letPerfumeTalk\",\n        onMouseMove: this.setCoordinates.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"video\", {\n        className: this.state.cursor,\n        autoPlay: true,\n        loop: true,\n        muted: true,\n        ref: this.video,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"source\", {\n        src: happyMP4,\n        type: \"video/mp4; codecs=\\\"avc1.4D401E, mp4a.40.2\\\"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }), React.createElement(\"source\", {\n        src: happyWebM,\n        type: \"video/webm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        id: \"cursor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        ref: this.feather,\n        className: \"cursor__click\",\n        alt: \"feather\",\n        src: featherClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        className: \"cursor__clicked\",\n        alt: \"feather\",\n        src: featherClicked,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Happy;\n}(Component);\n\nexport { Happy as default };","map":{"version":3,"sources":["/home/erik/projects/dedoface/src/components/VideoComponents/Happy.jsx"],"names":["React","Component","happyMP4","happyWebM","featherClick","featherClicked","Happy","props","setTitle","document","title","setCoordinates","e","setState","x","pageX","y","pageY","playVideo","video","current","play","clicked","muted","cursor","console","log","refs","feather","style","opacity","state","Number","createRef","test","bind","setTimeout","videoStarts","addEventListener","event","preventDefault","rotatingCursor","INTERVAL_POSITION","INTERVAL_ROTATION","lastCursorPos","currentCursorPos","lastCursorAngle","cursorAngle","cursorEl","cursorImageEl","setCurrentCursorProps","transform","Math","abs","updateCursor","window","clientX","clientY","setInterval","delt","atan2","PI","querySelector","initialize"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,QAAP,MAAqB,+CAArB;AACA,OAAOC,SAAP,MAAsB,iDAAtB,C,CACA;;AACA,OAAOC,YAAP,MAAyB,0DAAzB;AACA,OAAOC,cAAP,MAA2B,4DAA3B;;IAEqBC,K;;;;;AAKjB,iBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,+EAAMA,KAAN;;AADe,UAJnBC,QAImB,GAJR,YAAM;AACbC,MAAAA,QAAQ,CAACC,KAAT,GAAiB,+CAAjB;AACH,KAEkB;;AAAA,UAcnBC,cAdmB,GAcF,UAAAC,CAAC,EAAI;AAClB,YAAKC,QAAL,CAAc;AAACC,QAAAA,CAAC,EAAEF,CAAC,CAACG,KAAN;AAAaC,QAAAA,CAAC,EAAEJ,CAAC,CAACK;AAAlB,OAAd;AACH,KAhBkB;;AAAA,UAkBnBC,SAlBmB,GAkBP,YAAM;AACd,YAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB;AACH,KApBkB;;AAAA,UAsBnBC,OAtBmB,GAsBT,YAAM;AACZ,YAAKH,KAAL,CAAWC,OAAX,CAAmBC,IAAnB;;AACA,YAAKF,KAAL,CAAWC,OAAX,CAAmBG,KAAnB,GAA2B,KAA3B;;AAEA,YAAKV,QAAL,CAAc;AACVW,QAAAA,MAAM,EAAE;AADE,OAAd;;AAGAC,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAKC,IAAL,CAAUC,OAAV,CAAkBC,KAAlB,CAAwBC,OAApC,EAPY,CAQZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,KAtCkB;;AAEf,UAAKC,KAAL,GAAa;AACTP,MAAAA,MAAM,EAAE,6BADC;AAETV,MAAAA,CAAC,EAAEkB,MAFM;AAGThB,MAAAA,CAAC,EAAEgB;AAHM,KAAb;AAKA,UAAKb,KAAL,GAAanB,KAAK,CAACiC,SAAN,EAAb;AACA,UAAKL,OAAL,GAAe5B,KAAK,CAACiC,SAAN,EAAf,CARe,CASf;;AACA,UAAKC,IAAL,GAAYlC,KAAK,CAACiC,SAAN,EAAZ;AACA,UAAKtB,cAAL,GAAsB,MAAKA,cAAL,CAAoBwB,IAApB,uDAAtB;AAXe;AAYlB;;;;wCA4BmB;AAChB,WAAK3B,QAAL;AACA,WAAKU,SAAL;AACAkB,MAAAA,UAAU,CAAC,KAAKC,WAAN,EAAmB,GAAnB,CAAV;AACA5B,MAAAA,QAAQ,CAAC6B,gBAAT,CAA0B,aAA1B,EAAyC,UAAAC,KAAK;AAAA,eAAIA,KAAK,CAACC,cAAN,EAAJ;AAAA,OAA9C;;AAEA,UAAIC,cAAc,GAAI,YAAY;AAE9B;AACA,YAAMC,iBAAiB,GAAG,CAA1B;AACA,YAAMC,iBAAiB,GAAG,GAA1B;AACA,YAAIC,aAAa,GAAG;AAAC9B,UAAAA,CAAC,EAAE,CAAC,GAAL;AAAUE,UAAAA,CAAC,EAAE,CAAC;AAAd,SAApB;AACA,YAAI6B,gBAAgB,GAAG;AAAC/B,UAAAA,CAAC,EAAE,CAAC,GAAL;AAAUE,UAAAA,CAAC,EAAE,CAAC;AAAd,SAAvB;AACA,YAAI8B,eAAe,GAAG,CAAtB;AAAA,YAAyBC,WAAW,GAAG,CAAvC;AACA,YAAIC,QAAJ,EAAcC,aAAd;AAEA;AAEA;;AACA,iBAASC,qBAAT,GAAiC;AAC7B;AACAF,UAAAA,QAAQ,CAACnB,KAAT,CAAesB,SAAf,uBAAwCN,gBAAgB,CAAC/B,CAAzD,iBAAiE+B,gBAAgB,CAAC7B,CAAlF,SAF6B,CAI7B;;AACA,iBAAOoC,IAAI,CAACC,GAAL,CAASP,eAAe,GAAGC,WAA3B,IAA0C,GAAjD,EAAsD;AAClD,gBAAIA,WAAW,GAAGD,eAAlB,EAAmC;AAC/BC,cAAAA,WAAW,IAAI,GAAf;AACH,aAFD,MAEO,IAAIA,WAAW,GAAGD,eAAlB,EAAmC;AACtCC,cAAAA,WAAW,IAAI,GAAf;AACH;AACJ,WAX4B,CAY7B;AACA;;AACH;;AAED,iBAASO,YAAT,GAAwB;AACpBC,UAAAA,MAAM,CAACjB,gBAAP,CAAwB,WAAxB,EAAqC,UAAAC,KAAK,EAAI;AAC1CM,YAAAA,gBAAgB,GAAG;AAAC/B,cAAAA,CAAC,EAAEyB,KAAK,CAACiB,OAAV;AAAmBxC,cAAAA,CAAC,EAAEuB,KAAK,CAACkB;AAA5B,aAAnB;AACH,WAFD,EADoB,CAKpB;;AACAC,UAAAA,WAAW,CAACR,qBAAD,EAAwBR,iBAAxB,CAAX,CANoB,CAQpB;;AACAgB,UAAAA,WAAW,CAAC,YAAM;AACd,gBAAMC,IAAI,GAAG;AACT7C,cAAAA,CAAC,EAAE8B,aAAa,CAAC9B,CAAd,GAAkB+B,gBAAgB,CAAC/B,CAD7B;AAETE,cAAAA,CAAC,EAAE4B,aAAa,CAAC5B,CAAd,GAAkB6B,gBAAgB,CAAC7B;AAF7B,aAAb;AAIA,gBAAIoC,IAAI,CAACC,GAAL,CAASM,IAAI,CAAC7C,CAAd,IAAmB,CAAnB,IAAwBsC,IAAI,CAACC,GAAL,CAASM,IAAI,CAAC3C,CAAd,IAAmB,CAA/C,EAAkD;AAClD+B,YAAAA,WAAW,GAAIK,IAAI,CAACQ,KAAL,CAAWD,IAAI,CAAC3C,CAAhB,EAAmB2C,IAAI,CAAC7C,CAAxB,IAA6B,GAA7B,GAAmCsC,IAAI,CAACS,EAAvD;AAEAX,YAAAA,qBAAqB;AAErBN,YAAAA,aAAa,GAAGC,gBAAhB;AACAC,YAAAA,eAAe,GAAGC,WAAlB;AACH,WAZU,EAYRJ,iBAZQ,CAAX;AAaH;AAED;;;AACA,eAAO;AACH,wBAAc,sBAAM;AAChBK,YAAAA,QAAQ,GAAGvC,QAAQ,CAACqD,aAAT,CAAuB,SAAvB,CAAX;AACAb,YAAAA,aAAa,GAAGxC,QAAQ,CAACqD,aAAT,CAAuB,eAAvB,CAAhB;AACAR,YAAAA,YAAY;AACf;AALE,SAAP;AAOH,OA7DoB,EAArB;;AA8DA7C,MAAAA,QAAQ,CAAC6B,gBAAT,CAA0B,WAA1B,EAAuCG,cAAc,CAACsB,UAAtD;AACH;;;6BAEQ;AACL,aACI;AAAM,QAAA,OAAO,EAAE,KAAKzC,OAApB;AAA6B,QAAA,SAAS,EAAC,gBAAvC;AACM,QAAA,WAAW,EAAE,KAAKX,cAAL,CAAoBwB,IAApB,CAAyB,IAAzB,CADnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEI;AAAO,QAAA,SAAS,EAAE,KAAKJ,KAAL,CAAWP,MAA7B;AACO,QAAA,QAAQ,EAAE,IADjB;AAEO,QAAA,IAAI,EAAE,IAFb;AAGO,QAAA,KAAK,EAAE,IAHd;AAIO,QAAA,GAAG,EAAE,KAAKL,KAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAMI;AAAQ,QAAA,GAAG,EAAEjB,QAAb;AAAuB,QAAA,IAAI,EAAC,8CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QANJ,EAOI;AAAQ,QAAA,GAAG,EAAEC,SAAb;AAAwB,QAAA,IAAI,EAAC,YAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAPJ,CAFJ,EAeI;AAAK,QAAA,EAAE,EAAC,QAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,GAAG,EAAE,KAAKyB,OAAf;AAAwB,QAAA,SAAS,EAAC,eAAlC;AAAkD,QAAA,GAAG,EAAC,SAAtD;AAAgE,QAAA,GAAG,EAAExB,YAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAEI;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAiC,QAAA,GAAG,EAAC,SAArC;AAA+C,QAAA,GAAG,EAAEC,cAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,CAfJ,CADJ;AAsBH;;;;EA3I8BJ,S;;SAAdK,K","sourcesContent":["import React, {Component} from 'react';\nimport happyMP4 from '../../assets/videos/experience2/mp4/happy.mp4';\nimport happyWebM from \"../../assets/videos/experience2/webm/happy.webm\";\n// import happyMP3 from \"../../assets/audio/happy.mp3\";\nimport featherClick from \"../../assets/images/experience2/cursor/feather-click.png\";\nimport featherClicked from \"../../assets/images/experience2/cursor/feather-clicked.png\";\n\nexport default class Happy extends Component {\n    setTitle = () => {\n        document.title = \"Feeling happy today? Let Perfume Talk by MANE\";\n    };\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            cursor: 'letPerfumeTalk__video click',\n            x: Number,\n            y: Number\n        };\n        this.video = React.createRef();\n        this.feather = React.createRef();\n        // this.audio = React.createRef();\n        this.test = React.createRef();\n        this.setCoordinates = this.setCoordinates.bind(this);\n    };\n\n    setCoordinates = e => {\n        this.setState({x: e.pageX, y: e.pageY});\n    };\n\n    playVideo = () => {\n        this.video.current.play();\n    };\n\n    clicked = () => {\n        this.video.current.play();\n        this.video.current.muted = false;\n\n        this.setState({\n            cursor: \"letPerfumeTalk__video clicked\",\n        });\n        console.log(this.refs.feather.style.opacity);\n        // this.refs.MyGame.style.opacity = 0;\n        // do {\n        //     this.refs.MyGame.style.opacity--\n        // } while (this.refs.MyGame.style.opacity > 0);\n        //\n        // if (this.refs.MyGame.style.opacity === 0) {\n        //     this.refs.MyGame.remove();\n        // }\n    };\n\n    componentDidMount() {\n        this.setTitle();\n        this.playVideo();\n        setTimeout(this.videoStarts, 300);\n        document.addEventListener('contextmenu', event => event.preventDefault());\n\n        let rotatingCursor = (function () {\n\n            /* Local Variables */\n            const INTERVAL_POSITION = 5;\n            const INTERVAL_ROTATION = 100;\n            let lastCursorPos = {x: -999, y: -999};\n            let currentCursorPos = {x: -999, y: -999};\n            let lastCursorAngle = 0, cursorAngle = 0;\n            let cursorEl, cursorImageEl;\n\n            /* Local Functions */\n\n            // NOTE: I am transform two different elements here because so I can only animate the rotation with 'transition-property: transform'.\n            function setCurrentCursorProps() {\n                // Apply translation (set to actual cursor position)\n                cursorEl.style.transform = `translate(${currentCursorPos.x}px, ${currentCursorPos.y}px)`;\n\n                // Ensure correct rotation transition direction\n                while (Math.abs(lastCursorAngle - cursorAngle) > 180) {\n                    if (cursorAngle > lastCursorAngle) {\n                        cursorAngle -= 360;\n                    } else if (cursorAngle < lastCursorAngle) {\n                        cursorAngle += 360;\n                    }\n                }\n                // Apply rotation\n                // cursorImageEl.style.transform = `rotate(${cursorAngle - 90}deg)`;\n            }\n\n            function updateCursor() {\n                window.addEventListener('mousemove', event => {\n                    currentCursorPos = {x: event.clientX, y: event.clientY};\n                });\n\n                // Interval for updating cursor-position\n                setInterval(setCurrentCursorProps, INTERVAL_POSITION);\n\n                // Interval for updating cursor-rotation\n                setInterval(() => {\n                    const delt = {\n                        x: lastCursorPos.x - currentCursorPos.x,\n                        y: lastCursorPos.y - currentCursorPos.y\n                    };\n                    if (Math.abs(delt.x) < 3 && Math.abs(delt.y) < 3) return;\n                    cursorAngle = (Math.atan2(delt.y, delt.x) * 180 / Math.PI);\n\n                    setCurrentCursorProps();\n\n                    lastCursorPos = currentCursorPos;\n                    lastCursorAngle = cursorAngle;\n                }, INTERVAL_ROTATION);\n            }\n\n            /* Public Functions */\n            return {\n                'initialize': () => {\n                    cursorEl = document.querySelector('#cursor');\n                    cursorImageEl = document.querySelector('#cursor > img');\n                    updateCursor();\n                }\n            };\n        })();\n        document.addEventListener('mousemove', rotatingCursor.initialize);\n    };\n\n    render() {\n        return (\n            <main onClick={this.clicked} className=\"letPerfumeTalk\"\n                  onMouseMove={this.setCoordinates.bind(this)}>\n                <video className={this.state.cursor}\n                       autoPlay={true}\n                       loop={true}\n                       muted={true}\n                       ref={this.video}\n                >\n                    <source src={happyMP4} type='video/mp4; codecs=\"avc1.4D401E, mp4a.40.2\"'/>\n                    <source src={happyWebM} type=\"video/webm\"/>\n                </video>\n                {/*<audio autoPlay*/}\n                {/*ref={this.audio}>*/}\n                {/*<source src={happyMP3} type=\"audio/mpeg\"/>*/}\n                {/*</audio>*/}\n                <div id=\"cursor\">\n                    <img ref={this.feather} className=\"cursor__click\" alt=\"feather\" src={featherClick}/>\n                    <img className=\"cursor__clicked\" alt=\"feather\" src={featherClicked}/>\n                </div>\n            </main>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}